"use strict";(globalThis["webpackChunkopen_block_explorer"]=globalThis["webpackChunkopen_block_explorer"]||[]).push([[753],{8617:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Bt});var a=o(59835);function l(t,e,o,l,c,i){const s=(0,a.up)("ValidatorData");return(0,a.wg)(),(0,a.j4)(s)}var c=o(86970);const i=t=>((0,a.dD)("data-v-da825f62"),t=t(),(0,a.Cn)(),t),s={class:"q-pa-md header-support"},n={class:"row q-col-gutter-md q-pt-md container-max-width"},r={class:"col-md-8 col-sm-12 col-xs-12"},u=i((()=>(0,a._)("div",{class:"row q-pa-md text-h5 text-weight-light"},"Voting Statistics",-1))),d={class:"row q-pa-md"},p={class:"col-12"},v={class:"row q-pa-md"},m={class:"col-12"},h=i((()=>(0,a._)("div",{class:"row"},[(0,a._)("div",{class:"col-6 text-uppercase text-grey"},"Total votes"),(0,a._)("div",{class:"col-6"},[(0,a._)("div",{class:"float-right text-uppercase text-grey"},"Total Supply")])],-1))),w={class:"row"},f={class:"col-6"},g={class:"col-6"},_={class:"float-right"},y={key:0,class:"col-md-4 col-sm-12 col-xs-12"},b={class:"row full-width justify-center"},x=i((()=>(0,a._)("div",{class:"text-h6 q-py-md text-weight-regular text-grey"},"Current Vote Weight",-1))),V=(0,a.Uk)("Voting is inversley weighted and increases the more validators you vote for (up to 30)."),q={class:"row full-width justify-center text-h5"},k={class:"row full-width justify-center text-h6 q-py-md text-weight-regular text-grey"},T={class:"row full-width justify-center subtitle2 q-py-md text-weight-regular text-grey q-pt-lg"},D={class:"row full-width justify-center"},W={key:1,class:"col-md-4 col-sm-12 col-xs-12"},C={class:"column justify-center full-height"},S={class:"row"},F={class:"col-12 subtitle2 q-pb-md text-weight-regular text-grey q-pt-lg text-center"},H={class:"col-12"},Z={class:"container-max-width"};function P(t,e,o,l,i,P){const R=(0,a.up)("q-linear-progress"),E=(0,a.up)("q-card-section"),z=(0,a.up)("q-card"),j=(0,a.up)("q-tooltip"),Q=(0,a.up)("q-icon"),B=(0,a.up)("q-separator"),L=(0,a.up)("q-btn"),O=(0,a.up)("ValidatorDataTable"),I=(0,a.up)("ViewTransaction"),U=(0,a.up)("WalletModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a._)("div",n,[(0,a._)("div",r,[(0,a.Wm)(z,{class:"full-height"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[u,(0,a._)("div",d,[(0,a._)("div",p,[(0,a.Wm)(R,{class:"gradient-color q-mt-sm",size:"120px",rounded:"",value:t.votesProgress},null,8,["value"])])]),(0,a._)("div",v,[(0,a._)("div",m,[h,(0,a._)("div",w,[(0,a._)("div",f,(0,c.zw)(t.amount_voted.toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})),1),(0,a._)("div",g,[(0,a._)("div",_,(0,c.zw)(t.supply.toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})),1)])])])])])),_:1})])),_:1})]),t.accountValid?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a._)("div",b,[x,(0,a.Wm)(Q,{class:"info-icon",name:"info",color:"white",size:"20px"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,a.w5)((()=>[V])),_:1})])),_:1})]),(0,a._)("div",q,(0,c.zw)(t.balance),1),(0,a._)("div",k,(0,c.zw)(t.account),1)])),_:1}),(0,a.Wm)(B),(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a._)("div",T,"SELECTED "+(0,c.zw)(t.currentVote.length)+" BLOCK PRODUCERS",1),(0,a._)("div",D,[(0,a.Wm)(L,{class:"full-width q-pa-sm",label:"Vote for Block Producers",color:"primary",onClick:t.sendVoteTransaction},null,8,["onClick"])])])),_:1})])),_:1})])):((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(z,{class:"full-height"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{class:"full-height"},{default:(0,a.w5)((()=>[(0,a._)("div",C,[(0,a._)("div",S,[(0,a._)("div",F,"SELECTED "+(0,c.zw)(t.currentVote.length)+" BLOCK PRODUCERS",1),(0,a._)("div",H,[(0,a.Wm)(L,{class:"full-width q-pa-sm",label:"Vote for Block Producers",color:"primary",onClick:t.sendVoteTransaction},null,8,["onClick"])])])])])),_:1})])),_:1})]))])]),(0,a._)("div",Z,[(0,a.Wm)(O,{ref:"ValidatorDataTable",top21pay24h:t.top21pay24h},null,8,["top21pay24h"]),(0,a.Wm)(I,{modelValue:t.openTransaction,"onUpdate:modelValue":e[0]||(e[0]=e=>t.openTransaction=e),transactionId:t.transactionId,transactionError:t.transactionError||"",message:"transaction complete"},null,8,["modelValue","transactionId","transactionError"])]),(0,a.Wm)(U,{modelValue:t.showWalletModal,"onUpdate:modelValue":e[1]||(e[1]=e=>t.showWalletModal=e)},null,8,["modelValue"])],64)}var R=o(60499);const E=t=>((0,a.dD)("data-v-1c75a1ff"),t=t(),(0,a.Cn)(),t),z={class:"vd-table q-pa-md"},j={class:"vd-table__list bp-list"},Q={class:"vd-table__list-row q-col-gutter-sm"},B={class:"vd-table__list-col col-12"},L=E((()=>(0,a._)("div",{class:"q-card-section q-pa-md text-subtitle1 text-weight-light"},[(0,a._)("div",{class:"row"},[(0,a._)("div",{class:"col-1"},"Rank"),(0,a._)("div",{class:"col-3"}," BP"),(0,a._)("div",{class:"col-2 offset-1"}," Rank"),(0,a._)("div",{class:"col-2"}," Votes"),(0,a._)("div",{class:"col-2"}," Reward 24h")])],-1))),O={class:"q-card-section"},I={class:"row"},U={class:"col-1 q-py-md"},N={class:"row items-center full-height text-h6 q-px-md"},M={class:"col-3 q-py-md"},A=["href"],$={class:"text-uppercase text-h6 text-black"},K={class:"text-body2"},Y={class:"col-2 q-py-md offset-1"},G={class:"row items-center full-height"},J={class:"col-2 q-py-md"},X={class:"row items-center full-height"},tt={class:"col-2 q-py-md"},et={class:"row items-center full-height"},ot={class:"col-1 select-box q-py-md"},at={class:"row full-selection justify-center"},lt={class:"row full-selection justify-center"};function ct(t,e,o,l,i,s){const n=(0,a.up)("q-card"),r=(0,a.up)("q-chip"),u=(0,a.up)("q-checkbox"),d=(0,a.up)("q-badge");return(0,a.wg)(),(0,a.iD)("div",z,[(0,a._)("div",j,[(0,a._)("div",Q,[(0,a._)("div",B,[(0,a.Wm)(n,{flat:""},{default:(0,a.w5)((()=>[L])),_:1})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.producerRows,((o,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"vd-table__list-col col-12"},[(0,a.Wm)(n,{class:"producer-card",flat:""},{default:(0,a.w5)((()=>[(0,a._)("div",O,[(0,a._)("div",I,[(0,a._)("div",U,[(0,a._)("div",N,(0,c.zw)(t.producerRows.indexOf(o)+1),1)]),(0,a._)("div",M,[(0,a._)("a",{class:"hover-dec",href:"/account/"+o.owner},[(0,a._)("div",$,(0,c.zw)(o.name||o.owner),1)],8,A),(0,a._)("div",K,(0,c.zw)(o.location),1)]),(0,a._)("div",Y,[(0,a._)("div",G,[t.HeadProducer===o.owner?((0,a.wg)(),(0,a.j4)(r,{key:0,square:"",color:"primary","text-color":"white",label:"Producing"})):t.producerRows.indexOf(o)+1<22?((0,a.wg)(),(0,a.j4)(r,{key:1,outline:"",square:"",color:"primary","text-color":"white",label:"Top 21"})):t.producerRows.indexOf(o)+1<43?((0,a.wg)(),(0,a.j4)(r,{key:2,outline:"",square:"",color:"primary","text-color":"white",label:"Standby"})):((0,a.wg)(),(0,a.j4)(r,{key:3,outline:"",square:"",color:"primary","text-color":"white",label:"Unpaid Standby"}))])]),(0,a._)("div",J,[(0,a._)("div",X,(0,c.zw)((o.total_votes/1e4).toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})),1)]),(0,a._)("div",tt,[(0,a._)("div",et,(0,c.zw)((t.producerRows.indexOf(o)+1<22?t.producerPay:t.producerRows.indexOf(o)+1<43?t.producerPay/2:0).toFixed(0)+` ${t.symbol}`),1)]),(0,a._)("div",ot,[(0,a._)("div",at,[(0,a.Wm)(u,{modelValue:t.currentVote,"onUpdate:modelValue":[e[0]||(e[0]=e=>t.currentVote=e),e[1]||(e[1]=e=>t.updateVote(e))],val:o.owner,disable:!t.currentVote.includes(o.owner)&&t.currentVote.length>=30},null,8,["modelValue","val","disable"])]),(0,a._)("div",lt,[t.previousVote.includes(o.owner)?((0,a.wg)(),(0,a.j4)(d,{key:0,color:"green",label:"VOTED"})):(0,a.kq)("",!0)])])])])])),_:2},1024)])))),128))])])])}var it=o(78504),st=o(30229);const nt=(0,st.z)(),rt=30,ut=(0,a.aZ)({name:"ValidatorDataTable",props:{top21pay24h:{type:Number,required:!0}},setup(t){const e=(0,it.useStore)(),o=nt.getSystemToken().symbol,l=(0,a.Fl)((()=>e.state.account.accountName)),c=(0,a.Fl)((()=>e.state.account.data.voter_info?e.state.account.data.voter_info.producers.map((t=>t.toString())):[])),i=(0,a.Fl)((()=>[...e.state.chain.producers].map((t=>t.owner)))),s=(0,a.Fl)((()=>{let t=[...e.state.account.vote];return t.forEach(((e,o)=>{i.value.includes(e)||t.splice(o,1)})),t})),n=(0,R.iH)([]),r=(0,a.Fl)((()=>e.state.chain.head_block_producer)),u=(0,a.Fl)((()=>e.state.chain.producers||[])),d=(0,a.Fl)((()=>t.top21pay24h)),p=(0,a.Fl)((()=>e.state.chain.producerSchedule)),v=(0,a.Fl)((()=>s.value.length===rt)),m=(0,R.iH)({rowsPerPage:21});function h(t){s.value.splice(Number(t),1)}function w(t,e){return`https://${t}/${e}`}function f(t){return t?`flag-icon-${t}`:""}function g(t){t.forEach(((e,o)=>{i.value.includes(e)||t.splice(o,1)})),e.commit("account/setVote",t)}function _(t){return p.value.includes(t)}return{producerRows:u,account:l,previousVote:c,HeadProducer:r,selection:n,maxSelected:v,currentVote:s,pagination:m,producerPay:d,symbol:o,updateVote:g,removeVote:h,isTop21:_,getLink:w,getFlag:f}}});var dt=o(11639),pt=o(44458),vt=o(63190),mt=o(57691),ht=o(11221),wt=o(20990),ft=o(77741),gt=o(69984),_t=o.n(gt);const yt=(0,dt.Z)(ut,[["render",ct],["__scopeId","data-v-1c75a1ff"]]),bt=yt;_t()(ut,"components",{QCard:pt.Z,QCardSection:vt.Z,QChip:mt.Z,QCheckbox:ht.Z,QBadge:wt.Z,QColor:ft.Z});var xt=o(21889),Vt=o(1546),qt=o(79870),kt=o(61753),Tt=o(90347),Dt=function(t,e,o,a){function l(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,c){function i(t){try{n(a.next(t))}catch(e){c(e)}}function s(t){try{n(a["throw"](t))}catch(e){c(e)}}function n(t){t.done?o(t.value):l(t.value).then(i,s)}n((a=a.apply(t,e||[])).next())}))};const Wt=(0,st.z)(),Ct=(0,a.aZ)({name:"ValidatorData",components:{ValidatorDataTable:bt,ViewTransaction:Vt.Z,WalletModal:qt.Z},setup(){const t=(0,it.useStore)(),e=Wt.getSystemToken().symbol,o=(0,a.Fl)((()=>t.state.account.accountName)),l=(0,a.Fl)((()=>(0,Tt.xG)(p.value,2,e))),c=(0,a.Fl)((()=>t.state.chain.producers.length>42?42:t.state.chain.producers.length)),i=(0,R.iH)(""),s=(0,R.iH)([]),n=(0,a.Fl)((()=>t.state.account.vote)),r=(0,R.iH)(!1),u=(0,R.iH)(!1),d=(0,R.iH)(!1),p=(0,R.iH)(0),v=(0,R.iH)(0),m=(0,R.iH)(0),h=(0,a.Fl)((()=>o.value&&""!==o.value)),w=(0,R.iH)(t.state.account.TransactionId),f=(0,R.iH)(t.state.account.TransactionError),g=(0,R.iH)(!1),_=(0,R.iH)(!1),y=(0,R.iH)(0),b=(0,R.iH)(0),x=(0,R.iH)(0),V=(0,R.iH)(0),q=(0,R.iH)(0),k=(0,a.Fl)((()=>q.value/x.value||0));function T(){return Dt(this,void 0,void 0,(function*(){yield D(),yield S(),yield C(),yield W()}))}function D(){return Dt(this,void 0,void 0,(function*(){const t={code:"eosio",scope:"eosio",table:"voters",lower_bound:kt.Name.from(o.value),limit:1};p.value=(yield xt.h.getTableRows(t)).rows[0].last_vote_weight}))}function W(){return Dt(this,void 0,void 0,(function*(){const t=c.value<=21?2*c.value:c.value-21+42,e={code:"eosio",scope:"eosio",table:"payrate"};y.value=(yield xt.h.getTableRows(e)).rows[0].bpay_rate,b.value=y.value/1e5*x.value/365/t*2}))}function C(){return Dt(this,void 0,void 0,(function*(){const t={code:"eosio.token",scope:Wt.getSystemToken().symbol,table:"stat"};x.value=(0,Tt.sA)((yield xt.h.getTableRows(t)).rows[0].supply)}))}function S(){return Dt(this,void 0,void 0,(function*(){const t={code:"eosio",lower_bound:"eosio",table:"voters"};V.value=(yield xt.h.getTableByScope(t))[0].count;const e={code:"eosio",scope:"eosio",table:"global"};q.value=(yield xt.h.getTableRows(e)).rows[0].total_activated_stake/1e4}))}function F(){r.value=!r.value}function H(){return Dt(this,void 0,void 0,(function*(){h.value?(yield t.dispatch("account/sendVoteTransaction"),g.value=!0,yield D()):_.value=!0}))}return(0,a.YP)(c,(()=>{T()})),(0,a.bv)((()=>Dt(this,void 0,void 0,(function*(){yield T()})))),{account:o,lastUpdated:i,producerVotes:s,showCpu:r,voteChanged:u,resetFlag:d,lastWeight:p,lastStaked:v,stakedAmount:m,currentVote:n,accountValid:h,openTransaction:g,transactionId:w,transactionError:f,payrate:y,top21pay24h:b,supply:x,voters:V,amount_voted:q,votesProgress:k,balance:l,showWalletModal:_,symbol:e,toggleView:F,sendVoteTransaction:H}}});var St=o(8289),Ft=o(22857),Ht=o(46858),Zt=o(50926),Pt=o(68879);const Rt=(0,dt.Z)(Ct,[["render",P],["__scopeId","data-v-da825f62"]]),Et=Rt;_t()(Ct,"components",{QCard:pt.Z,QCardSection:vt.Z,QLinearProgress:St.Z,QIcon:Ft.Z,QTooltip:Ht.Z,QSeparator:Zt.Z,QBtn:Pt.Z,QColor:ft.Z});var zt=function(t,e,o,a){function l(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,c){function i(t){try{n(a.next(t))}catch(e){c(e)}}function s(t){try{n(a["throw"](t))}catch(e){c(e)}}function n(t){t.done?o(t.value):l(t.value).then(i,s)}n((a=a.apply(t,e||[])).next())}))};const jt=(0,a.aZ)({name:"VotePage",components:{ValidatorData:Et},setup(){const t=(0,it.useStore)();(0,a.bv)((()=>zt(this,void 0,void 0,(function*(){if(!t.state.account.data.voter_info&&t.state.account.accountName){const e=yield xt.h.getAccount(t.state.account.accountName);t.commit("account/setAccountData",e)}yield t.dispatch("chain/updateBpList"),window.setInterval((()=>{t.dispatch("chain/updateBlockData")}),2e3)}))))}}),Qt=(0,dt.Z)(jt,[["render",l]]),Bt=Qt}}]);