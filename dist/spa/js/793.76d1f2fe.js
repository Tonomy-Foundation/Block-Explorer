"use strict";(globalThis["webpackChunkopen_block_explorer"]=globalThis["webpackChunkopen_block_explorer"]||[]).push([[793],{98793:(e,o,t)=>{t.r(o),t.d(o,{default:()=>K});var a=t(59835);const l={class:"row justify-between items-center q-pt-lg q-pb-sm"},r=(0,a._)("h1",{class:"text-h5 q-ma-none"},"Multisig Transactions",-1),n={class:"q-py-lg"},s={class:"q-py-lg"};function p(e,o,t,p,u,i){const c=(0,a.up)("q-btn"),d=(0,a.up)("q-tab"),m=(0,a.up)("q-tabs"),b=(0,a.up)("q-separator"),v=(0,a.up)("ProposalTable"),w=(0,a.up)("q-tab-panel"),g=(0,a.up)("q-tab-panels"),y=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(y,{padding:"",class:"trx-table container-max-width"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[r,e.isAuthenticated?((0,a.wg)(),(0,a.j4)(c,{key:0,padding:"sm md",color:"primary",label:"New proposal",to:"/proposal/new"})):(0,a.kq)("",!0)]),(0,a.Wm)(m,{modelValue:e.tab,"onUpdate:modelValue":o[0]||(o[0]=o=>e.tab=o),align:"left","active-color":"primary","content-class":"text-grey-7","no-caps":""},{default:(0,a.w5)((()=>[e.isAuthenticated?((0,a.wg)(),(0,a.j4)(d,{key:0,name:"myProposal",label:"My proposals"})):(0,a.kq)("",!0),(0,a.Wm)(d,{name:"allProposal",label:"All proposals"})])),_:1},8,["modelValue"]),(0,a.Wm)(b),(0,a.Wm)(g,{modelValue:e.tab,"onUpdate:modelValue":o[1]||(o[1]=o=>e.tab=o)},{default:(0,a.w5)((()=>[e.isAuthenticated?((0,a.wg)(),(0,a.j4)(w,{key:0,class:"q-pa-none",name:"myProposal"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(v,{title:"Needs your signature",type:"needsYourSignature",account:e.account},null,8,["account"]),(0,a.Wm)(v,{title:"Proposals created",type:"proposalsCreated",account:e.account},null,8,["account"])])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(w,{class:"q-pa-none",name:"allProposal"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(v,{title:"Proposals",type:"allProposals",account:e.account,blockProducers:e.blockProducers},null,8,["account","blockProducers"])])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var u=t(60499),i=t(86970);const c={class:"q-table__control full-width justify-between"},d=["textContent"],m={class:"q-pt-md q-px-md"},b={key:0,class:"q-pr-md q-pb-md"},v={key:1,class:"q-pb-md"},w=(0,a._)("span",{class:"block q-mb-sm text-body3"},"Pending signature from",-1),g=(0,a.Uk)("No results"),y={class:"q-pr-md q-pb-md"},f=(0,a._)("span",{class:"q-pa-md full-width text-center text-body2"}," No proposals ",-1);function P(e,o,t,l,r,n){const s=(0,a.up)("q-toggle"),p=(0,a.up)("q-item-section"),u=(0,a.up)("q-item"),P=(0,a.up)("q-select"),q=(0,a.up)("q-btn-dropdown"),h=(0,a.up)("router-link"),k=(0,a.up)("q-td"),_=(0,a.up)("q-badge"),x=(0,a.up)("q-tr"),S=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)(S,{pagination:e.pagination,"onUpdate:pagination":o[4]||(o[4]=o=>e.pagination=o),color:"primary",flat:"",bordered:!1,square:!0,title:e.title,"table-header-class":"text-grey-7",rows:e.rows,columns:e.columns,"row-key":"proposalName","rows-per-page-options":[20,40,80,160],onRequest:e.onRequest},{top:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",{class:"q-table__title",textContent:(0,i.zw)(e.title)},null,8,d),(0,a._)("div",null,[(0,a.Wm)(q,{modelValue:e.filterDropdown,"onUpdate:modelValue":o[3]||(o[3]=o=>e.filterDropdown=o),outlined:"outlined",flat:"",color:e.hasSomeFilterActive?"primary":"",label:e.hasSomeFilterActive?"â€¢ Filter by":"Filter by"},{default:(0,a.w5)((()=>[(0,a._)("div",m,["needsYourSignature"===e.type?((0,a.wg)(),(0,a.iD)("div",b,[(0,a.Wm)(s,{modelValue:e.isSigned,"onUpdate:modelValue":o[0]||(o[0]=o=>e.isSigned=o),label:"Already signed"},null,8,["modelValue"])])):(0,a.kq)("",!0),"allProposals"===e.type?((0,a.wg)(),(0,a.iD)("div",v,[w,(0,a.Wm)(P,{modelValue:e.blockProducer,"onUpdate:modelValue":o[1]||(o[1]=o=>e.blockProducer=o),outlined:"",dense:"","hide-bottom-space":"","hide-selected":"","fill-input":"","use-input":"",clearable:"","input-debounce":"0",label:"Block Producer",options:e.optionsBlockProducers,onFilter:e.onFilterBlockProducer},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[g])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])])):(0,a.kq)("",!0),(0,a._)("div",y,[(0,a.Wm)(s,{modelValue:e.isExecuted,"onUpdate:modelValue":o[2]||(o[2]=o=>e.isExecuted=o),label:"Inactive proposals"},null,8,["modelValue"])])])])),_:1},8,["modelValue","color","label"])])])])),"no-data":(0,a.w5)((()=>[f])),body:(0,a.w5)((e=>[(0,a.Wm)(x,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{key:"proposalName",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"text-primary cursor-pointer text-no-decoration",to:"/proposal/"+e.row.proposalName},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.proposalName),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(k,{key:"approvalStatus",props:e},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,i.zw)(e.row.approvalStatus),1)])),_:2},1032,["props"]),(0,a.Wm)(k,{key:"proposer",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"text-primary cursor-pointer text-no-decoration",to:"/account/"+e.row.proposer},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.proposer),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(k,{key:"executed",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{color:e.row.executed?"green":"orange",label:e.row.executed?"EXECUTED":"NOT EXECUTED"},null,8,["color","label"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["pagination","title","rows","columns","onRequest"])}var q=t(19302),h=t(21889),k=function(e,o,t,a){function l(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,r){function n(e){try{p(a.next(e))}catch(o){r(o)}}function s(e){try{p(a["throw"](e))}catch(o){r(o)}}function p(e){e.done?t(e.value):l(e.value).then(n,s)}p((a=a.apply(e,o||[])).next())}))};const _={sortBy:"desc",descending:!1,page:1,rowsPerPage:20,rowsNumber:20},x=(0,a.aZ)({name:"ProposalTable",props:{title:{type:String,required:!0},account:{type:String,required:!0},type:{type:String,required:!0},blockProducers:{type:Array}},setup(e){const o=(0,q.Z)(),t=(0,u.iH)([]),l=(0,u.iH)(_),r=(0,u.iH)(!1),n=(0,u.iH)(!1),s=(0,u.iH)(""),p=(0,u.iH)(!1),i=(0,a.Fl)((()=>r.value||n.value||s.value)),c=[{name:"proposalName",align:"left",label:"PROPOSAL NAME",field:"proposalNameSliced"},{name:"approvalStatus",align:"left",label:"APPROVAL STATUS",field:"approvalStatus"},{name:"proposer",align:"left",label:"PROPOSER",field:"proposer"}];function d(a){var p,u,i;return k(this,void 0,void 0,(function*(){const{page:c,rowsPerPage:d,sortBy:m,descending:b}=a.pagination,{account:v}=e,w="proposalsCreated"===e.type?v:"";let g="";"allProposals"===e.type&&s.value&&(g=s.value),"needsYourSignature"!==e.type||r.value||(g=v);let y="";"needsYourSignature"===e.type&&r.value&&(y=v);try{const e=yield h.h.getProposals({proposer:w,requested:g,provided:y,executed:n.value,limit:d,skip:(c-1)*d});l.value={rowsNumber:e.total.value,page:c,rowsPerPage:d,sortBy:m,descending:b},t.value=e.proposals.map((e=>{const o=`${e.provided_approvals.length}/${e.provided_approvals.length+e.requested_approvals.length}`;return{primaryKey:e.primary_key,proposalName:e.proposal_name,approvalStatus:o,proposer:e.proposer}}))}catch(f){const e=JSON.parse(JSON.stringify(f));o.notify({color:"negative",message:(null===(i=null===(u=null===(p=null===e||void 0===e?void 0:e.cause)||void 0===p?void 0:p.json)||void 0===u?void 0:u.error)||void 0===i?void 0:i.what)||"Unable load proposals",actions:[{label:"Dismiss",color:"white"}]})}}))}(0,a.bv)((()=>k(this,void 0,void 0,(function*(){yield d({pagination:l.value})})))),(0,a.YP)([r,n,s],(()=>k(this,void 0,void 0,(function*(){p.value=!1,l.value=_,yield d({pagination:l.value})}))));const m=(0,u.iH)(e.blockProducers);function b(o,t){t(""!==o?()=>{const t=o.toLowerCase();m.value=e.blockProducers.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{m.value=e.blockProducers})}return{columns:c,rows:t,pagination:l,isSigned:r,isExecuted:n,blockProducer:s,hasSomeFilterActive:i,optionsBlockProducers:m,filterDropdown:p,onRequest:d,onFilterBlockProducer:b}}});var S=t(11639),W=t(82429),Z=t(18479),T=t(23175),V=t(32259),N=t(490),A=t(76749),Q=t(31233),U=t(67220),F=t(20990),B=t(69984),E=t.n(B);const C=(0,S.Z)(x,[["render",P]]),j=C;E()(x,"components",{QTable:W.Z,QBtnDropdown:Z.Z,QToggle:T.Z,QSelect:V.Z,QItem:N.Z,QItemSection:A.Z,QTr:Q.Z,QTd:U.Z,QBadge:F.Z});var D=t(18910),H=t(78504),O=function(e,o,t,a){function l(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,r){function n(e){try{p(a.next(e))}catch(o){r(o)}}function s(e){try{p(a["throw"](e))}catch(o){r(o)}}function p(e){e.done?t(e.value):l(e.value).then(n,s)}p((a=a.apply(e,o||[])).next())}))};const R=(0,a.aZ)({name:"ProposalPage",components:{ProposalTable:j},setup(){const e=(0,D.yj)(),o=(0,D.tv)(),t=(0,H.useStore)(),l=(0,u.iH)([]),r=(0,a.Fl)((()=>t.state.account.accountName)),n=(0,a.Fl)((()=>t.state.account.isAuthenticated)),s=(0,u.iH)(e.query["tab"]||"myProposal");return(0,a.bv)((()=>{n.value||(s.value="allProposal")})),(0,a.bv)((()=>O(this,void 0,void 0,(function*(){const e=yield h.h.getProducers(),o=[];for(let t=0;t<e.rows.length;t++){const a=e.rows[t];1===a.is_active&&o.push(a.owner)}l.value=o})))),(0,a.YP)([s],(()=>{o.push({path:o.currentRoute.value.path,query:{tab:s.value}})})),{tab:s,account:r,isAuthenticated:n,blockProducers:l}}});var Y=t(69885),z=t(68879),L=t(47817),I=t(57661),M=t(50926),J=t(89800),X=t(84106);const $=(0,S.Z)(R,[["render",p]]),K=$;E()(R,"components",{QPage:Y.Z,QBtn:z.Z,QTabs:L.Z,QTab:I.Z,QSeparator:M.Z,QTabPanels:J.Z,QTabPanel:X.Z})}}]);